<div class="results-container">
  <!-- Encabezado principal -->
  <header class="page-header">
    <div class="header-content">
      <div class="title-section">
        <h1><i class="header-icon">üåé</i> Copa Mundial 2026 - Resultados</h1>
        <p class="subtitle">Registra resultados, consulta partidos y revisa tus estad√≠sticas</p>
      </div>
      <div class="header-actions">
        <button class="btn-primary" (click)="openResultForm()">
          <i class="btn-icon">üìù</i>
        </button>
      </div>
    </div>
  </header>

  <!-- Barra de navegaci√≥n -->
  <div class="results-nav">
    <div class="nav-tabs">
      <button class="nav-tab active" data-tab="results">
        <i class="tab-icon">üìä</i> Resultados de Partidos
      </button>
      <button class="nav-tab" data-tab="stats">
        <i class="tab-icon">‚≠ê</i> Mis Estad√≠sticas
      </button>
    </div>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    
    <!-- Secci√≥n: Resultados de Partidos -->
    <div class="section active" id="results-section">
      <!-- Filtros -->
      <div class="filters-section">
        <div class="filters-row">
          <div class="filter-group">
            <label>Filtrar por fase:</label>
            <select class="filter-select">
              <option value="all">Todas las fases</option>
              <option value="group">Fase de Grupos</option>
              <option value="round16">Octavos de Final</option>
              <option value="quarter">Cuartos de Final</option>
              <option value="semi">Semifinales</option>
              <option value="final">Final</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Ordenar por:</label>
            <select class="filter-select">
              <option value="date-desc">Fecha (m√°s reciente)</option>
              <option value="date-asc">Fecha (m√°s antiguo)</option>
              <option value="goals">M√°s goles</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="spinner">
          <div class="spinner-icon">‚öΩ</div>
        </div>
        <p>Cargando resultados del Mundial...</p>
      </div>

      <!-- Lista de partidos -->
      <div *ngIf="!isLoading" class="matches-grid">
        <div *ngFor="let match of matches" class="match-card">
          <!-- Encabezado del partido -->
          <div class="match-header">
            <div class="match-phase">
              <span class="phase-badge">{{match.phase}}</span>
              <span *ngIf="match.group" class="group-badge">{{match.group}}</span>
            </div>
            <div class="match-date">
              <i class="date-icon">üìÖ</i> {{formatDate(match.date)}}
            </div>
          </div>

          <!-- Cuerpo del partido -->
          <div class="match-body">
            <!-- Equipos y marcador -->
            <div class="score-section">
              <div class="team home-team">
                <div class="team-flag">{{match.homeTeam.flag}}</div>
                <div class="team-info">
                  <h3 class="team-name">{{match.homeTeam.name}}</h3>
                  <div class="team-code">{{match.homeTeam.code}}</div>
                </div>
              </div>
              
              <div class="score-display">
                <div class="score">{{match.homeScore}}</div>
                <div class="divider">-</div>
                <div class="score">{{match.awayScore}}</div>
              </div>
              
              <div class="team away-team">
                <div class="team-info">
                  <h3 class="team-name">{{match.awayTeam.name}}</h3>
                  <div class="team-code">{{match.awayTeam.code}}</div>
                </div>
                <div class="team-flag">{{match.awayTeam.flag}}</div>
              </div>
            </div>

            <!-- Informaci√≥n del partido -->
            <div class="match-info">
              <div class="info-item">
                <i class="info-icon">üèüÔ∏è</i>
                <div class="info-content">
                  <span class="info-label">Estadio:</span>
                  <span class="info-value">{{match.stadium}}</span>
                </div>
              </div>
              
              <div class="info-item">
                <i class="info-icon">üìç</i>
                <div class="info-content">
                  <span class="info-label">Ciudad:</span>
                  <span class="info-value">{{match.city}}</span>
                </div>
              </div>
              
              <div class="info-item">
                <i class="info-icon">üë®‚Äç‚öñÔ∏è</i>
                <div class="info-content">
                  <span class="info-label">√Årbitro:</span>
                  <span class="info-value">{{match.referee}}</span>
                </div>
              </div>
              
              <div class="info-item">
                <i class="info-icon">üëë</i>
                <div class="info-content">
                  <span class="info-label">MVP:</span>
                  <span class="info-value">{{match.mvp.name}} ({{match.mvp.team}})</span>
                </div>
              </div>
            </div>

            <!-- Eventos del partido -->
            <div class="match-events">
              <h4><i class="events-icon">üìà</i> Eventos del Partido</h4>
              <div class="events-list">
                <div *ngFor="let event of match.events" class="event-item" [class]="event.type">
                  <div class="event-time">{{event.minute}}'</div>
                  <div class="event-icon">{{getEventIcon(event.type)}}</div>
                  <div class="event-details">
                    <div class="event-player">{{event.player}}</div>
                    <div class="event-description">{{event.description}}</div>
                  </div>
                  <div class="event-team">{{event.team}}</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Pie del partido -->
          <div class="match-footer">
            <div class="attendance">
              <i class="attendance-icon">üë•</i> Asistencia: {{match.attendance}}
            </div>
            <div class="match-status">
              <span class="status-badge completed">Finalizado</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Secci√≥n: Mis Estad√≠sticas -->
    <div class="section" id="stats-section">
      <div class="player-stats-container">
        <!-- Perfil del jugador -->
        <div class="player-profile">
          <div class="profile-header">
            <div class="player-avatar">CM</div>
            <div class="player-info">
              <h2>{{userStats.name}} <span class="player-number">#{{userStats.number}}</span></h2>
              <p class="player-team">{{userStats.team}} - {{userStats.position}}</p>
            </div>
            <div class="player-rating">
              <div class="rating-value">{{userStats.averageRating}}</div>
              <div class="rating-label">Rating Promedio</div>
            </div>
          </div>
        </div>

        <!-- Estad√≠sticas principales -->
        <div class="stats-summary">
          <div class="stat-card">
            <div class="stat-icon">‚öΩ</div>
            <div class="stat-content">
              <div class="stat-value">{{userStats.goals}}</div>
              <div class="stat-label">Goles</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-content">
              <div class="stat-value">{{userStats.assists}}</div>
              <div class="stat-label">Asistencias</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üü®</div>
            <div class="stat-content">
              <div class="stat-value">{{userStats.yellowCards}}</div>
              <div class="stat-label">Amarillas</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üü•</div>
            <div class="stat-content">
              <div class="stat-value">{{userStats.redCards}}</div>
              <div class="stat-label">Rojas</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">‚è±Ô∏è</div>
            <div class="stat-content">
              <div class="stat-value">{{userStats.minutesplayers}}'</div>
              <div class="stat-label">Minutos</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üëë</div>
            <div class="stat-content">
              <div class="stat-value">{{userStats.mvpCount}}</div>
              <div class="stat-label">MVP</div>
            </div>
          </div>
        </div>

        <!-- Estad√≠sticas detalladas -->
        <div class="detailed-stats">
          <div class="stats-column">
            <h3><i class="stats-icon">üìä</i> Estad√≠sticas de Juego</h3>
            <div class="stats-list">
              <div class="stat-row">
                <span class="stat-name">Partidos Jugados</span>
                <span class="stat-value">{{userStats.matchesplayers}}</span>
              </div>
              <div class="stat-row">
                <span class="stat-name">Pases Completados</span>
                <span class="stat-value">{{userStats.passes}}</span>
              </div>
              <div class="stat-row">
                <span class="stat-name">Precisi√≥n de Pases</span>
                <span class="stat-value">{{userStats.passAccuracy}}%</span>
              </div>
              <div class="stat-row">
                <span class="stat-name">Entradas</span>
                <span class="stat-value">{{userStats.tackles}}</span>
              </div>
              <div class="stat-row">
                <span class="stat-name">Intercepciones</span>
                <span class="stat-value">{{userStats.interceptions}}</span>
              </div>
            </div>
          </div>

          <!-- Partidos jugados -->
          <div class="stats-column">
            <h3><i class="stats-icon">üìÖ</i> Partidos del Mundial</h3>
            <div class="matches-list">
              <div *ngFor="let match of userStats.worldCupMatches" class="player-match">
                <div class="match-opponent">
                  <span class="opponent-name">{{match.opponent}}</span>
                </div>
                <div class="match-result">
                  <span class="result-badge">{{match.result}}</span>
                </div>
                <div class="match-rating">
                  <div class="rating">{{match.rating}}</div>
                  <div class="minutes">{{match.minutes}}'</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Pr√≥ximo partido -->
        <div class="next-match-card">
          <div class="next-match-header">
            <h3><i class="next-icon">‚è≠Ô∏è</i> Pr√≥ximo Partido</h3>
            <span class="phase-badge">{{userStats.nextMatch.phase}}</span>
          </div>
          <div class="next-match-body">
            <div class="next-match-info">
              <div class="info-row">
                <span class="info-label">Rival:</span>
                <span class="info-value">{{userStats.nextMatch.opponent}}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Fecha:</span>
                <span class="info-value">{{userStats.nextMatch.date}}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Estadio:</span>
                <span class="info-value">{{userStats.nextMatch.stadium}}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Ciudad:</span>
                <span class="info-value">{{userStats.nextMatch.city}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Registrar Resultado -->
<div *ngIf="showResultForm" class="modal-overlay" (click)="closeResultForm()">
  <div class="modal-content result-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2><i class="modal-icon">üåé</i> Registrar Resultado - Mundial 2026</h2>
      <button class="btn-close" (click)="closeResultForm()">
        <i class="close-icon">‚úï</i>
      </button>
    </div>

    <div class="modal-body">
      <form (ngSubmit)="submitResult()">
        <div class="form-grid">
          <!-- Fase del torneo -->
          <div class="form-group full-width">
            <label for="phase">Fase del Torneo *</label>
            <select 
              id="phase"
              [(ngModel)]="resultForm.phase"
              name="phase"
              required
              class="form-select">
              <option value="" disabled selected>Selecciona la fase</option>
              <option *ngFor="let phase of phases" [value]="phase">{{phase}}</option>
            </select>
          </div>

          <!-- Equipos -->
          <div class="form-group">
            <label for="homeTeam">Equipo Local</label>
            <input 
              type="text" 
              id="homeTeam"
              [(ngModel)]="resultForm.homeTeam"
              name="homeTeam"
              readonly
              class="form-input readonly"
              value="{{resultForm.homeTeam}}">
          </div>

          <div class="form-group">
            <label for="awayTeam">Equipo Visitante *</label>
            <select 
              id="awayTeam"
              [(ngModel)]="resultForm.awayTeam"
              name="awayTeam"
              required
              class="form-select">
              <option value="" disabled selected>Selecciona rival</option>
              <option *ngFor="let team of worldCupTeams" [value]="team" [disabled]="team === resultForm.homeTeam">
                {{team}}
              </option>
            </select>
          </div>

          <!-- Marcador -->
          <div class="form-group">
            <label for="homeScore">Goles Local *</label>
            <input 
              type="number" 
              id="homeScore"
              [(ngModel)]="resultForm.homeScore"
              name="homeScore"
              min="0"
              max="20"
              required
              class="form-input"
              placeholder="Ej: 3">
          </div>

          <div class="form-group">
            <label for="awayScore">Goles Visitante *</label>
            <input 
              type="number" 
              id="awayScore"
              [(ngModel)]="resultForm.awayScore"
              name="awayScore"
              min="0"
              max="20"
              required
              class="form-input"
              placeholder="Ej: 2">
          </div>

          <!-- Fecha y lugar -->
          <div class="form-group">
            <label for="date">Fecha del Partido</label>
            <input 
              type="date" 
              id="date"
              [(ngModel)]="resultForm.date"
              name="date"
              class="form-input">
          </div>

          <div class="form-group">
            <label for="stadium">Estadio *</label>
            <select 
              id="stadium"
              [(ngModel)]="resultForm.stadium"
              name="stadium"
              required
              class="form-select">
              <option value="" disabled selected>Selecciona estadio</option>
              <option *ngFor="let stadium of stadiums" [value]="stadium.name">
                {{stadium.name}} ({{stadium.city}})
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="city">Ciudad</label>
            <input 
              type="text" 
              id="city"
              [(ngModel)]="resultForm.city"
              name="city"
              class="form-input"
              placeholder="Ej: Ciudad de M√©xico">
          </div>

          <!-- √Årbitro y MVP -->
          <div class="form-group">
            <label for="referee">√Årbitro Principal</label>
            <input 
              type="text" 
              id="referee"
              [(ngModel)]="resultForm.referee"
              name="referee"
              class="form-input"
              placeholder="Ej: Daniele Orsato (ITA)">
          </div>

          <div class="form-group">
            <label for="mvp">Jugador del Partido (MVP)</label>
            <input 
              type="text" 
              id="mvp"
              [(ngModel)]="resultForm.mvp"
              name="mvp"
              class="form-input"
              placeholder="Ej: Lionel Messi">
          </div>

          <!-- Mensaje informativo -->
          <div class="form-message full-width">
            <div class="message-icon">‚ÑπÔ∏è</div>
            <div class="message-content">
              <strong>Nota:</strong> Solo capitanes de equipo y √°rbitros oficiales pueden registrar resultados.
              Los resultados ser√°n verificados por la FIFA antes de ser oficiales.
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-cancel" (click)="closeResultForm()">
            Cancelar
          </button>
          <button type="submit" class="btn-submit">
            <i class="btn-icon">üì§</i> Registrar Resultado
          </button>
        </div>
      </form>
    </div>
  </div>
</div>